# Run locally
To run CDMS locally follow these instructions:

**Obs.:** Commands started with $ are executed on terminal without super user (sudo).

#### 1. Requirements
Firstly install the:

* Docker
* Docker Compose

#### 2. Create a new folder and access it:
Use the commands below to create and access the new folder:

    $ mkdir workspace
    $ cd workspace

#### 3. Clone the project
Clone the CDMS project:

    $ git clone git@github.com:TSIDW5/cdms.git

#### 4. Access the project folder

    $ cd cdms

#### 5. Build the containers
If you are on linux:

    $ docker build --build-arg USER_ID=$(id -u) --build-arg GROUP_ID=$(id -g) .

If you are on macos:

    $ docker build

#### 6. Setup env variables
Create a file **"application.yml"** using the example **"application.yml.example"**:

    $ cp config/application.yml.example config/application.yml

If necessary, change **username**, **password** and **host** in "application.yml". By default, it will work with no changes.

    db.username: postgres
    db.password: postgres
    db.host: db

#### 7. Setup mailer
In "application.yml" is necessary setup data to mailer. In this project is used the [mailtrap.io](https://mailtrap.io/) to send emails.

    mailer.from: 'email@email.com'
      mailer.smtp: 'smtp.mailtrap.io'
      mailer.smtp.port: '2525'
      mailer.smtp.domain: 'smtp.mailtrap.io'
      mailer.smtp.username: 'username'
      mailer.smtp.password: 'password'
      mailer.smtp.authentication: 'cram_md5'

#### 8. Install de dependencies 
Ruby gems:

    $ docker-compose run --rm web bundle install

Yarn:

    $ docker-compose run --rm web yarn install

#### 9. Create database, tables and populate with faker data.

    $ docker-compose run --rm web bundle exec rails db:create
    $ docker-compose run --rm web bundle exec rails db:migrate
    $ docker-compose run --rm web bundle exec rails db:seed
    $ docker-compose run --rm web bundle exec rails db:populate

#### 10. Up the container web

    $ docker-compose up -d web

#### 11. Access the application in your browser

* The public page url is http://localhost:3000
* The public page url is http://localhost:3000/admins

# To contribute

If you have interesting to contribute for this project, please access [this page](https://github.com/MarczalTSIGP/cdms/wiki/2.-Contribute-to-the-app).